<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Sasha AI</title>
<style>
:root { --neon:#00d8ff; --dark:#050505; }
html,body{margin:0;padding:0;background:var(--dark);color:#fff;font-family:Segoe UI;height:100%;overflow:hidden}

#sasha-viewport{position:fixed;inset:0;z-index:1;pointer-events:none}

#chat-container{
position:fixed;bottom:30px;left:30px;width:420px;height:480px;
background:rgba(10,10,10,.9);border-radius:10px;
display:flex;flex-direction:column;z-index:10
}

#messages{flex:1;padding:15px;overflow-y:auto;display:flex;flex-direction:column;gap:10px}
.msg{padding:10px;border-radius:6px;max-width:85%;font-size:14px}
.ai{background:rgba(0,216,255,.1);color:var(--neon);align-self:flex-start}
.user{background:#222;align-self:flex-end}

.input-row{display:flex;gap:8px;padding:10px;border-top:1px solid #333}
input{flex:1;background:#000;border:1px solid #444;color:#fff;padding:10px;border-radius:5px}
button{background:#000;border:1px solid var(--neon);color:var(--neon);padding:10px 18px;cursor:pointer}
</style>
</head>

<body>

<div id="sasha-viewport"></div>

<div id="chat-container">
<div id="messages">
<div class="msg ai"><b>–°–ò–°–¢–ï–ú–ê:</b> –ö–ª–∏–∫–Ω–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</div>
</div>
<div class="input-row">
<input id="user-in" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeydown="if(event.key==='Enter')askSasha()">
<button onclick="askSasha()">SEND</button>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/loaders/GLTFLoader.js"></script>

<script>
let sasha,isSpeaking=false,activated=false;
const clock=new THREE.Clock();

/* ===== –ú–û–ó–ì ===== */
const SashaBrain={
memory:JSON.parse(localStorage.getItem("sasha_memory"))||{facts:{}},

save(){
localStorage.setItem("sasha_memory",JSON.stringify(this.memory));
},

process(text){
const raw=text.trim();
const t=raw.toLowerCase();

/* === –ü–†–ò–í–ï–¢ === */
if(/^(–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π|—Ö–∞–π|–π–æ)/i.test(t))
return "–ü—Ä–∏–≤–µ—Ç üôÇ –Ø –Ω–∞ —Å–≤—è–∑–∏.";

/* === –ö–ê–ö –î–ï–õ–ê === */
if(/–∫–∞–∫ –¥–µ–ª–∞|–∫–∞–∫ —Ç—ã/i.test(t))
return "–†–∞–±–æ—Ç–∞—é —Å—Ç–∞–±–∏–ª—å–Ω–æ. –ì–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å.";

/* === –í–û–ó–ú–û–ñ–ù–û–°–¢–ò === */
if(/—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å|—Ç–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏/i.test(t))
return "–Ø —É–º–µ—é –æ–±—â–∞—Ç—å—Å—è, –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å —Ñ–∞–∫—Ç—ã, –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –≥–æ–≤–æ—Ä–∏—Ç—å –≥–æ–ª–æ—Å–æ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ 3D-–º–æ–¥–µ–ª—å.";

/* === –†–ê–°–°–ö–ê–ñ–ò === */
if(/—Ä–∞—Å—Å–∫–∞–∂–∏|—Å–∫–∞–∂–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å/i.test(t))
return "–ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å —Ñ–∞–∫—Ç, –ø–æ–º–æ—á—å —Å –∫–æ–¥–æ–º –∏–ª–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç—É. –°–∫–∞–∂–∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ.";

/* === –û–ë–£–ß–ï–ù–ò–ï === */
if(t.startsWith("–∑–∞–ø–æ–º–Ω–∏")){
const m=raw.match(/–∑–∞–ø–æ–º–Ω–∏\s+(.+?)\s*‚Äî\s*—ç—Ç–æ\s*(.+)/i);
if(!m)
return "–§–æ—Ä–º–∞—Ç –æ–±—É—á–µ–Ω–∏—è: –∑–∞–ø–æ–º–Ω–∏ X ‚Äî —ç—Ç–æ Y";

const key=m[1].trim().toLowerCase();
const val=m[2].trim();

this.memory.facts[key]=val;
this.save();

return `–ó–∞–ø–æ–º–Ω–∏–ª üëç ${key} ‚Äî —ç—Ç–æ ${val}`;
}

/* === –í–û–ü–†–û–°–´ === */
if(t.startsWith("—á—Ç–æ —Ç–∞–∫–æ–µ")||t.startsWith("–∫—Ç–æ —Ç–∞–∫–æ–π")){
const key=t.replace(/—á—Ç–æ —Ç–∞–∫–æ–µ|–∫—Ç–æ —Ç–∞–∫–æ–π|\?/gi,"").trim();
if(this.memory.facts[key])
return `${key.toUpperCase()} ‚Äî —ç—Ç–æ ${this.memory.facts[key]}`;
return "–Ø —ç—Ç–æ–≥–æ –µ—â—ë –Ω–µ –∑–Ω–∞—é. –ú–æ–∂–µ—à—å –º–µ–Ω—è –Ω–∞—É—á–∏—Ç—å.";
}

/* === FALLBACK === */
return "–Ø —Ç–µ–±—è —Å–ª—ã—à—É. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –º—ã—Å–ª—å —á—É—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ.";
}
};

/* ===== –ì–û–õ–û–° ===== */
function speak(text){
speechSynthesis.cancel();
const u=new SpeechSynthesisUtterance(text);
u.rate=1;
u.pitch=.9;
u.onstart=()=>isSpeaking=true;
u.onend=()=>isSpeaking=false;
speechSynthesis.speak(u);
}

/* ===== –ß–ê–¢ ===== */
function addMsg(w,t,c){
messages.innerHTML+=`<div class="msg ${c}"><b>${w}:</b> ${t}</div>`;
messages.scrollTop=messages.scrollHeight;
}

function askSasha(){
const i=document.getElementById("user-in");
if(!i.value.trim())return;
addMsg("–í—ã",i.value,"user");
const r=SashaBrain.process(i.value);
setTimeout(()=>{addMsg("–°–∞—à–∞",r,"ai");speak(r)},200);
i.value="";
}

/* ===== –ê–ö–¢–ò–í–ê–¶–ò–Ø ===== */
document.body.addEventListener("click",()=>{
if(activated)return;
activated=true;
const hi="–ü—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞. –ì–æ—Ç–æ–≤ –æ–±—É—á–∞—Ç—å—Å—è –∏–ª–∏ –≤—ã–¥–∞–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è.";
addMsg("–°–∞—à–∞",hi,"ai");
speak(hi);
},{once:true});

/* ===== 3D –ú–û–î–ï–õ–¨ ===== */
const scene=new THREE.Scene();
const cam=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,.1,1000);

const renderer=new THREE.WebGLRenderer({alpha:true,antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.getElementById("sasha-viewport").appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,2.5));

new THREE.GLTFLoader().load(
"https://raw.githubusercontent.com/aproyt4-lang/GameDevAlex/main/SashaAI.glb",
g=>{
  sasha=g.scene;
  // –ü–û–ü–†–ê–í–ò–õ–ò –ü–û–ó–ò–¶–ò–Æ –ò –í–†–ê–©–ï–ù–ò–ï
  sasha.position.set(0,0,0);        // —Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞
  sasha.scale.set(1.8,1.8,1.8);    // –º–∞—Å—à—Ç–∞–±
  sasha.rotation.set(0,0,0);        // –ª–∏—Ü–æ–º –≤–ø–µ—Ä–µ–¥
  scene.add(sasha);

  // –ö–∞–º–µ—Ä–∞ —Å–º–æ—Ç—Ä–∏—Ç –ø—Ä—è–º–æ –Ω–∞ –º–æ–¥–µ–ª—å
  cam.position.set(0,1.5,5);
  cam.lookAt(sasha.position);

  animate();
}
);

function animate(){
  requestAnimationFrame(animate);
  const t=clock.getElapsedTime();
  if(sasha){
    sasha.position.y=Math.sin(t*1.5)*0.02; // –ª—ë–≥–∫–æ–µ –ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–Ω–∏–µ
    sasha.lookAt(cam.position);             // –≤—Å–µ–≥–¥–∞ –ª–∏—Ü–æ–º –∫ –∫–∞–º–µ—Ä–µ
  }
  renderer.render(scene,cam);
}
</script>
</body>
</html>
















