<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Sasha AI // Чистый Код</title>
    <style>
        body { margin: 0; background: #000; color: #00d8ff; font-family: 'Courier New', monospace; }
        #interface { position: absolute; z-index: 10; padding: 20px; width: 100%; height: 100%; pointer-events: none; }
        .window { 
            background: rgba(0, 15, 25, 0.9); border: 1px solid #00d8ff; 
            padding: 15px; pointer-events: auto; margin-bottom: 10px; width: 350px;
        }
        #log { height: 200px; overflow-y: auto; border-bottom: 1px solid #111; margin-bottom: 10px; font-size: 12px; }
        input { background: #000; border: 1px solid #00d8ff; color: #00d8ff; width: 100%; padding: 5px; outline: none; }
        .sasha-say { color: #fff; }
        .sys-msg { color: #555; font-size: 10px; }
    </style>
</head>
<body>

    <div id="interface">
        <div class="window">
            <div id="status">СТАТУС: ОЖИДАНИЕ</div>
            <div id="log"></div>
            <input type="text" id="cmd" placeholder="Скажи что-нибудь или обучи...">
        </div>
        <div class="window">
            <div>БАЗА ЗНАНИЙ: <span id="mem-count">0</span></div>
            <div id="last-learned" style="font-size: 10px; color: #777;">Пока ничему не обучен</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- 1. ПАМЯТЬ И ОБУЧЕНИЕ ---
        let memory = JSON.parse(localStorage.getItem('sasha_knowledge')) || {};
        
        function updateUI() {
            const keys = Object.keys(memory);
            document.getElementById('mem-count').innerText = keys.length;
            if(keys.length > 0) {
                document.getElementById('last-learned').innerText = "Последнее: " + keys[keys.length-1];
            }
        }
        updateUI();

        // --- 2. ГОЛОС (Синтез речи) ---
        function sashaSay(text) {
            const ut = new SpeechSynthesisUtterance(text);
            ut.lang = 'ru-RU';
            ut.pitch = 0.8; // Делаем голос чуть более мужественным/сеньорским
            window.speechSynthesis.speak(ut);
            addLog("САША: " + text, "sasha-say");
        }

        // --- 3. ОБРАБОТКА И ОБУЧЕНИЕ (Логика мозгов) ---
        function processCommand(input) {
            const text = input.toLowerCase().trim();
            addLog("ВЫ: " + text);

            // Логика обучения: "запомни [вопрос] это [ответ]"
            if (text.startsWith("запомни")) {
                const parts = text.replace("запомни", "").split(" это ");
                if (parts.length === 2) {
                    const question = parts[0].trim();
                    const answer = parts[1].trim();
                    memory[question] = answer;
                    localStorage.setItem('sasha_knowledge', JSON.stringify(memory));
                    updateUI();
                    sashaSay("Я запомнил. Теперь я знаю, что " + question + " это " + answer);
                } else {
                    sashaSay("Бро, используй формат: запомни [что] это [описание]");
                }
                return;
            }

            // Поиск в базе знаний
            let found = false;
            for (let key in memory) {
                if (text.includes(key)) {
                    sashaSay(memory[key]);
                    found = true;
                    break;
                }
            }

            if (!found) {
                if (text.includes("привет")) {
                    sashaSay("Добрый день! Я Саша, твой гид по GamedevAlex. Чем займемся?");
                } else {
                    sashaSay("Я пока этого не знаю, но ты можешь меня обучить.");
                }
            }
        }

        // --- 4. СЛУХ (Распознавание речи) ---
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'ru-RU';
        recognition.continuous = true;

        recognition.onresult = (event) => {
            const speech = event.results[event.results.length - 1][0].transcript;
            processCommand(speech);
        };

        // Активация системы по клику (нужно для безопасности браузера)
        document.body.onclick = () => {
            try { 
                recognition.start(); 
                document.getElementById('status').innerText = "СТАТУС: СЛУШАЮ...";
                addLog(">>> Микрофон активен", "sys-msg");
            } catch(e) {}
        };

        // --- ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ---
        function addLog(text, className = "") {
            const logDiv = document.getElementById('log');
            const div = document.createElement('div');
            div.className = className;
            div.innerText = text;
            logDiv.appendChild(div);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        document.getElementById('cmd').onkeypress = (e) => {
            if(e.key === 'Enter') {
                processCommand(e.target.value);
                e.target.value = '';
            }
        };

        // Визуал ядра (Просто сфера)
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        const core = new THREE.Mesh(new THREE.IcosahedronGeometry(1, 1), new THREE.MeshBasicMaterial({color: 0x00d8ff, wireframe: true}));
        scene.add(core);
        camera.position.z = 3;
        function animate() { requestAnimationFrame(animate); core.rotation.y += 0.01; renderer.render(scene, camera); }
        animate();
    </script>
</body>
</html>










