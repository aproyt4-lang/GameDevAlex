<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Sasha AI</title>
<style>
:root { --neon:#00d8ff; --dark:#050505; }
html,body{margin:0;padding:0;background:var(--dark);color:#fff;font-family:Segoe UI;height:100%;overflow:hidden}

#sasha-viewport{position:fixed;inset:0;z-index:1;pointer-events:none}

#chat-container{
position:fixed;bottom:30px;left:30px;width:420px;height:480px;
background:rgba(10,10,10,.9);border-radius:10px;
display:flex;flex-direction:column;z-index:10
}

#messages{flex:1;padding:15px;overflow-y:auto;display:flex;flex-direction:column;gap:10px}
.msg{padding:10px;border-radius:6px;max-width:85%;font-size:14px}
.ai{background:rgba(0,216,255,.1);color:var(--neon);align-self:flex-start}
.user{background:#222;align-self:flex-end}

.input-row{display:flex;gap:8px;padding:10px;border-top:1px solid #333}
input{flex:1;background:#000;border:1px solid #444;color:#fff;padding:10px;border-radius:5px}
button{background:#000;border:1px solid var(--neon);color:var(--neon);padding:10px 18px;cursor:pointer}
</style>
</head>
<body>

<div id="sasha-viewport"></div>

<div id="chat-container">
<div id="messages">
<div class="msg ai"><b>–°–ò–°–¢–ï–ú–ê:</b> –ö–ª–∏–∫–Ω–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</div>
</div>
<div class="input-row">
<input id="user-in" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeydown="if(event.key==='Enter')askSasha()">
<button onclick="askSasha()">SEND</button>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/loaders/GLTFLoader.js"></script>

<script>
let sasha,isSpeaking=false,activated=false;
const clock=new THREE.Clock();

/* ===== –û–ë–£–ß–ê–ï–ú–´–ô –ú–û–ó–ì –ò–ò ===== */
const SashaBrain = {
    memory: JSON.parse(localStorage.getItem("sasha_memory")) || [], // –º–∞—Å—Å–∏–≤ –∑–Ω–∞–Ω–∏–π

    save(){
        localStorage.setItem("sasha_memory", JSON.stringify(this.memory));
    },

    process(text){
        const raw = text.trim();
        const t = raw.toLowerCase();

        // –ü—Ä–∏–≤–µ—Ç
        if(/^(–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π|—Ö–∞–π|–π–æ)/i.test(t))
            return "–ü—Ä–∏–≤–µ—Ç üôÇ –Ø –Ω–∞ —Å–≤—è–∑–∏.";

        // –ö–∞–∫ –¥–µ–ª–∞
        if(/–∫–∞–∫ –¥–µ–ª–∞|–∫–∞–∫ —Ç—ã/i.test(t))
            return "–†–∞–±–æ—Ç–∞—é —Å—Ç–∞–±–∏–ª—å–Ω–æ. –ì–æ—Ç–æ–≤–∞ –ø–æ–º–æ–≥–∞—Ç—å.";

        // –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
        if(/—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å|—Ç–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏/i.test(t))
            return "–Ø —É–º–µ—é –æ–±—â–∞—Ç—å—Å—è, –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å —Ñ–∞–∫—Ç—ã –∏ –æ–±—É—á–∞—Ç—å—Å—è –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞.";
        
        if(/–¥–∞–π –º–Ω–µ –∫–æ–¥ –ª—é–±–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞|—Ç–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏/i.test(t))
        {
           using UnityEngine;

          public class PlayerMove : MonoBehaviour
         {
         public float speed = 5f;
         public float gravity = -9.81f;

         private CharacterController controller;
         private Vector3 velocity;

        void Start()
        {
        controller = GetComponent<CharacterController>();
       }

        void Update()
        {
        float x = Input.GetAxis("Horizontal"); // A / D
        float z = Input.GetAxis("Vertical");   // W / S

        Vector3 move = transform.right * x + transform.forward * z;
        controller.Move(move * speed * Time.deltaTime);

        // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
        if (controller.isGrounded && velocity.y < 0)
            velocity.y = -2f;

        velocity.y += gravity * Time.deltaTime;
        controller.Move(velocity * Time.deltaTime);
       }
      }
            
        }
        
        // –ü–æ–∏—Å–∫ –ø–æ –ø–∞–º—è—Ç–∏ (–ø—Ä–æ—Å—Ç–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
        let found = this.memory.find(item => t.includes(item.key));
        if(found) return found.text;

        // –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–∞–º—è—Ç–∏ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        const words = t.split(/\s+/).slice(0,3).join(" "); // –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –ø–µ—Ä–≤—ã–µ 3 —Å–ª–æ–≤–∞
        this.memory.push({key: words, text: raw});
        this.save();

        return "–ó–∞–ø–æ–º–Ω–∏–ª üëç";
    }
};

/* ===== –ì–û–õ–û–° ===== */
function speak(text){
    speechSynthesis.cancel();
    const u=new SpeechSynthesisUtterance(text);
    u.rate=1;
    u.pitch=0.9;
    u.onstart=()=>isSpeaking=true;
    u.onend=()=>isSpeaking=false;
    speechSynthesis.speak(u);
}

/* ===== –ß–ê–¢ ===== */
function addMsg(w,t,c){
    const messages = document.getElementById("messages");
    messages.innerHTML += `<div class="msg ${c}"><b>${w}:</b> ${t}</div>`;
    messages.scrollTop = messages.scrollHeight;
}

/* ===== –í–í–û–î –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ===== */
function askSasha(){
    const input = document.getElementById("user-in");
    if(!input.value.trim()) return;

    addMsg("–í—ã", input.value, "user");

    const r = SashaBrain.process(input.value);
    setTimeout(()=>{addMsg("–°–∞—à–∞", r, "ai"); speak(r);}, 100);
    input.value = "";
}

/* ===== –ê–ö–¢–ò–í–ê–¶–ò–Ø ===== */
document.body.addEventListener("click", ()=>{
    if(activated) return;
    activated=true;
    const hi="–ü—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞. –ì–æ—Ç–æ–≤ –æ–±—É—á–∞—Ç—å—Å—è –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.";
    addMsg("–°–∞—à–∞", hi, "ai");
    speak(hi);
},{once:true});

/* ===== 3D –ú–û–î–ï–õ–¨ ===== */
const scene=new THREE.Scene();
const cam=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,0.1,1000);

const renderer=new THREE.WebGLRenderer({alpha:true,antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.getElementById("sasha-viewport").appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,2.5));

new THREE.GLTFLoader().load(
"https://raw.githubusercontent.com/aproyt4-lang/GameDevAlex/main/SashaAI.glb",
g=>{
  sasha=g.scene;
  sasha.position.set(0,0,0);
  sasha.scale.set(1.8,1.8,1.8);
  scene.add(sasha);

  cam.position.set(0,1.5,5);
  cam.lookAt(sasha.position);

  animate();
}
);

function animate(){
    requestAnimationFrame(animate);
    if(sasha){
        sasha.position.y = 0;
        sasha.rotation.x = 0;
        sasha.rotation.z = 0;
        sasha.rotation.y = THREE.MathUtils.degToRad(-90); // —Ä–æ–≤–Ω–æ 90¬∞
    }
    renderer.render(scene, cam);
}

/* ===== –†–ï–ó–ê–ô–ó ===== */
window.addEventListener("resize", ()=>{
    cam.aspect = innerWidth/innerHeight;
    cam.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>




















